<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planet Nine Test Store - The Advancement Demo</title>
    <link rel="stylesheet" href="/styles.css">
    <script src="https://js.stripe.com/v3/"></script>
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">üåç</span>
                    <h1>Planet Nine Test Store</h1>
                </div>
                <div class="header-status">
                    <div class="advancement-status" id="advancement-status">
                        <span class="status-indicator" id="status-indicator">‚ö™</span>
                        <span class="status-text" id="status-text">Checking Advancement...</span>
                    </div>
                    <div class="home-base-indicator" id="home-base-indicator">
                        <span class="base-icon">üè†</span>
                        <span class="base-name" id="home-base-name">No Home Base</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Left Column: Store Information -->
            <div class="left-column">
                <section class="store-info">
                    <h2>Welcome to the Planet Nine Test Store</h2>
                    <p class="store-description">
                        This is a demonstration website for <strong>The Advancement</strong> browser extension. 
                        It showcases the complete Planet Nine purchase flow including:
                    </p>
                    <ul class="features-list">
                        <li>üîç <strong>Teleported Product Feeds</strong> - Products discovered from your home base</li>
                        <li>üîê <strong>Multi-PubKey Authentication</strong> - Site owner, product creator, and base verification</li>
                        <li>üí≥ <strong>Stripe Integration</strong> - Seamless payments via The Advancement extension</li>
                        <li>üè† <strong>Home Base Processing</strong> - Payments processed through your selected Planet Nine base</li>
                    </ul>
                </section>

                <section class="how-it-works">
                    <h3>How It Works</h3>
                    <div class="steps">
                        <div class="step">
                            <span class="step-number">1</span>
                            <div class="step-content">
                                <h4>Install The Advancement</h4>
                                <p>Install The Advancement Safari extension and select a home base</p>
                            </div>
                        </div>
                        <div class="step">
                            <span class="step-number">2</span>
                            <div class="step-content">
                                <h4>Browse Teleported Products</h4>
                                <p>Products from your home base appear in the right column</p>
                            </div>
                        </div>
                        <div class="step">
                            <span class="step-number">3</span>
                            <div class="step-content">
                                <h4>Purchase Securely</h4>
                                <p>Click any product to purchase using Sessionless authentication</p>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="pubkey-info">
                    <h3>PubKey Information</h3>
                    <div class="pubkey-grid">
                        <div class="pubkey-card">
                            <h4>üè™ Site Owner</h4>
                            <p class="pubkey-label">Planet Nine Test Store</p>
                            <code class="pubkey" id="site-pubkey">Loading...</code>
                        </div>
                        <div class="pubkey-card">
                            <h4>üè† Your Home Base</h4>
                            <p class="pubkey-label" id="base-pubkey-label">Select a home base</p>
                            <code class="pubkey" id="base-pubkey">Not selected</code>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Right Column: Teleported Product Feed -->
            <div class="right-column">
                <section class="teleported-feed">
                    <div class="feed-header">
                        <h3>üîç Teleported Products</h3>
                        <button class="refresh-btn" id="refresh-feed" title="Refresh teleported content">
                            <span class="refresh-icon">üîÑ</span>
                        </button>
                    </div>
                    
                    <div class="feed-status" id="feed-status">
                        <div class="status-message" id="status-message">
                            <span class="status-icon">‚è≥</span>
                            <p>Loading teleported products from your home base...</p>
                        </div>
                    </div>

                    <div class="products-grid" id="products-grid">
                        <!-- Products will be loaded here via JavaScript -->
                    </div>
                </section>
            </div>
        </main>

        <!-- Product Purchase Modal -->
        <div class="modal" id="purchase-modal">
            <div class="modal-overlay" id="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Complete Your Purchase</h3>
                    <button class="modal-close" id="modal-close">‚úï</button>
                </div>
                
                <div class="modal-body" id="modal-body">
                    <!-- Product details will be inserted here -->
                </div>
                
                <div class="modal-footer">
                    <button class="btn btn-secondary" id="cancel-purchase">Cancel</button>
                    <button class="btn btn-primary" id="complete-purchase" disabled>
                        <span class="btn-icon">üí≥</span>
                        Complete Purchase
                    </button>
                </div>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div class="loading-overlay" id="loading-overlay">
            <div class="loading-spinner">
                <span class="spinner">‚è≥</span>
                <p id="loading-message">Processing...</p>
            </div>
        </div>

        <!-- Toast Notifications -->
        <div class="toast-container" id="toast-container"></div>
    </div>

    <!-- Scripts -->
    <script src="/teleportation-client.js"></script>
    <script src="/purchase-flow.js"></script>
    <script src="/main.js"></script>
</body>
</html>